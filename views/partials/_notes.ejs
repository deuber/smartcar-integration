<!-- views/partials/_notes.ejs -->

<tr id="notes-<%= vehicle.id %>" style="display: none;">
  <td colspan="5">
    <div class="notes-section">
      <h4>Service Notes</h4>
      <% if (vehicle.notes.length > 0) { %>
        <% vehicle.notes.forEach((note, index) => { %>
          <div class="note-item">
            <strong>Date:</strong> <%= note.date %><br>
            <strong>Odometer:</strong> <%= note.odometer %> mi<br>
            <strong>Note:</strong> <%= note.note %>
            <button class="btn btn-danger btn-sm mt-2" onclick="deleteNote('<%= vehicle.id %>', <%= index %>)">Delete</button>
          </div>
        <% }); %>
      <% } else { %>
        <p>No service notes available.</p>
      <% } %>

      <!-- Add Note Form -->
      <form class="mt-3" onsubmit="addNote(event, '<%= vehicle.id %>')">
        <div class="mb-3">
          <label for="date-<%= vehicle.id %>" class="form-label">Date of Service</label>
          <input type="date" class="form-control" id="date-<%= vehicle.id %>" name="date" required>
        </div>
        <div class="mb-3">
          <label for="note-<%= vehicle.id %>" class="form-label">Service Note</label>
          <input type="text" class="form-control" id="note-<%= vehicle.id %>" name="note" placeholder="Enter service note" required>
        </div>
        <div class="mb-3">
          <label for="odometer-<%= vehicle.id %>" class="form-label">Odometer Reading</label>
          <input type="number" class="form-control" id="odometer-<%= vehicle.id %>" name="odometer" placeholder="Enter odometer reading" required min="0" step="1">
        </div>
        <button type="submit" class="btn btn-success">Add Note</button>
      </form>
    </div>
  </td>
</tr>
